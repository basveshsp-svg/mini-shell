#include<sys/wait.h>
#include <unistd.h>
#include <stdio.h>
#include <string.h>   /* because we're using strtok() */

char command[1024];
char *command_ptr = command;
char *argv[100];
int token_number = 0, fork_val;
char **ptr = argv;

int main() {

 while(1){

    printf("\nmini-shell> ");


    fflush(stdout);                                                             /* fflush() to flush out output immediately after printf 
                                                                                so characters are not stored in buffer 
                                                                                before it's output*/

    command_ptr = fgets(command, sizeof(command), stdin);


    if(command_ptr==NULL){break;}


    char *mov_ptr = strtok(command, " \t\n");                                   /*Notice first call of strtok()
                                                                                takes arguments(command,
                                                                                delimiter) and from next 
                                                                                call it's (NULL, remaining delimiter)*/
    while(mov_ptr!= NULL){

        argv[token_number] = mov_ptr;
        token_number++;
        mov_ptr = strtok(NULL," \t\n");

        } argv[token_number] = NULL; token_number = 0;                 /*It is very essential to end argv with NULL because so execvp will know when
                                                                         arguments have ended */                                      
     if (argv[0] == NULL) { printf("No input"); continue; }



     fork_val = fork();

     if (fork_val == 0){ 

       int exec_val = execvp(argv[0],argv);
       if(exec_val == -1) { printf("\nError"); exit(1); } 

     } 
        else if(fork_val==-1) { printf("\n Error"); continue; }
        else { wait(NULL);}
  
  } 
   return 0;
}
